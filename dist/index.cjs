var b=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames,k=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var S=(t,n,r)=>n in t?b(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,w=(t,n)=>{for(var r in n||(n={}))C.call(n,r)&&S(t,r,n[r]);if(k)for(var r of k(n))I.call(n,r)&&S(t,r,n[r]);return t};var j=(t,n)=>{for(var r in n)b(t,r,{get:n[r],enumerable:!0})},L=(t,n,r,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of U(n))!C.call(t,i)&&i!==r&&b(t,i,{get:()=>n[i],enumerable:!(s=q(n,i))||s.enumerable});return t};var V=t=>L(b({},"__esModule",{value:!0}),t);var Gt={};j(Gt,{releaseBump:()=>Zt});module.exports=V(Gt);var z="/Users/PShryock/desktop/paul/jessica/perennial/packages",Z="/Users/PShryock/desktop/paul/jessica/perennial",G="/Users/PShryock/desktop/paul/jessica/jessicawalch.com/jessica-walch-wp-theme",H="/Users/PShryock/desktop/paul/jessica/perennial/packages/content-api",M="iTerm.app",J="/usr/local/bin/node",Q="/Users/PShryock/Desktop/paul/release-bump",K="xterm-256color",W="/bin/zsh",X="dist/cli.cjs",Y="https://registry.npmjs.org/",ee="XQ9#6ngPyjG",te="/Users/PShryock/desktop/paul/jessica/jessicawalch.com",ne="66.228.44.140",re="/var/folders/yl/55jg9h2s0qq84vy_hjj8djb40000gp/T/",ie="/usr/local",se="morbidly-bodacious-pulmonary",oe="3.5.0beta5",ae="/Users/PShryock/desktop/nba/watch-party/room-scheduling-server",le="/Users/PShryock/desktop/nba/manage.nba.com/wordpress/wp-content/themes/manage-nba",ce="1",pe="alpha",ge="w0t1p0:DEF32510-5469-4DDC-9F7F-387E758A1432",de="",ue="/Users/PShryock/desktop/paul/jessica",fe="/Users/PShryock/Desktop/paul/release-bump",me="user:15451034:634",he="/Users/PShryock/.oh-my-zsh",ye="3.0.0-alpha.32",be="/Users/PShryock/desktop/nba",xe="PShryock",$e="/Users/PShryock/desktop/paul/paul-shryock/realogy",Oe="/Users/PShryock/desktop/paul/jessica/perennial/packages/cms/plugins",Pe="unix2003",Re="3.0.0-alpha.31",we="/usr/local/etc/npmrc",Ee="/Users/PShryock/desktop/paul/jessica/jessicawalch.com/jessica-walch-wp-plugin",ve="/Users/PShryock/desktop/nba/wordpress.nba.com/wordpress/wp-content/themes",Fe="/Users/PShryock/.kube/config:/Users/PShryock/.kube/nba-com-dev",ke="/Users/PShryock/desktop/nba/manage.nba.com/plugins-mgr",Se="/Users/PShryock/desktop/nba/wordpress.nba.com/wordpress",Ce="paulshryock",Ae="/private/tmp/com.apple.launchd.lUOKteYJzJ/Listeners",De="120",Be="0x1F6:0x0:0x0",Te="/usr/local/lib/node_modules/npm/bin/npm-cli.js",Ne="/Users/PShryock/desktop/nba/manage.nba.com/plugins-mgr/plugins",_e="/Users/PShryock/desktop/paul",qe="less",Ue="6cba6cbf5b26deff0296f2c09acd6b6dded51065",Ie="/Users/PShryock/desktop/paul/paul-shryock",je="Gxfxcxdxbxegedabagacad",Le="10.103.132.17",Ve="/Applications/iTerm.app/Contents/Resources/terminfo:/usr/share/terminfo",ze="/Users/PShryock/Desktop/paul/release-bump/node_modules/.bin:/Users/PShryock/Desktop/paul/node_modules/.bin:/Users/PShryock/Desktop/node_modules/.bin:/Users/PShryock/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/PShryock/Desktop/paul/release-bump/node_modules/.bin:/Users/PShryock/Desktop/paul/node_modules/.bin:/Users/PShryock/Desktop/node_modules/.bin:/Users/PShryock/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/PShryock/Desktop/paul/release-bump/node_modules/.bin:/Users/PShryock/Desktop/paul/node_modules/.bin:/Users/PShryock/Desktop/node_modules/.bin:/Users/PShryock/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/MacGPG2/bin:/Users/PShryock/.cargo/bin:/usr/local/opt/php/bin:/usr/local/opt/php/sbin:/Users/PShryock/.composer/vendor/bin",Ze="/Users/PShryock/desktop/nba/manage.nba.com/wordpress/wp-content/themes",Ge="springsh",He="/Users/PShryock/Desktop/paul/release-bump/package.json",Me="true",Je="/Users/PShryock/Desktop/paul/release-bump/node_modules/.bin/ts-node",Qe="/Users/PShryock/desktop/nba/watch-party",Ke="/Users/PShryock/.npmrc",We="/Users/PShryock/.npm-init.js",Xe="com.googlecode.iterm2",Ye="run-script",et="Tc84#%5V*Z#",tt="9sCa7eGPv6S*&PFc;",nt="/Users/PShryock/desktop/paul/release-bump",rt="compile:source",it="vi",st="release-bump",ot="en_US.UTF-8",at="/Users/PShryock/desktop/nba/wordpress.nba.com/wordpress/wp-content/plugins",lt="Default",ct="120",pt="/Users/PShryock/desktop/nba/watch-party/nba-watch-party-client",gt="/Users/PShryock/desktop/paul/jessica/perennial/packages/cms/themes",dt="paulshryock",ut="0x0",ft=">=17.5.0",mt="/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",ht="f780ecc1988ce88fd1bdcdecc32858c5b66e64bdc349db6612f6c44ef81ac303",yt="3.0.0-alpha.32",bt="0",xt="4",$t="/Users/PShryock",Ot="15;0",Pt="/Users/PShryock/desktop/paul/jessica/perennial/packages/cms",Rt="3.5.0beta5",wt="true",Et="162.253.224.19",vt="w0t1p0:DEF32510-5469-4DDC-9F7F-387E758A1432",Ft="/Users/PShryock/.npm",kt="-R",St="PShryock",Ct="ts-node ./bin/compile.ts",At="10.103.132.111",Dt="0",Bt="npm/8.5.5 node/v17.8.0 darwin x64 workspaces/false",Tt="/Users/PShryock/desktop/nba/wordpress.nba.com",Nt="/Users/PShryock/desktop/paul/jessica/jessicawalch.com/jessica-walch-2021",_t="/Users/PShryock/desktop/nba/manage.nba.com",qt="iTerm2",Ut="/Users/PShryock/desktop/paul/jessica/perennial/packages/www",It="Paul Shryock",jt="/usr/local/bin/node",Lt="/usr/local",Vt="truecolor",zt="3.0.0-alpha.32",f={PERENNIAL_PACKAGES_DIR:z,PERENNIAL_DIR:Z,JESSICA_THEME_DIR:G,PERENNIAL_CAPI_DIR:H,TERM_PROGRAM:M,NODE:J,INIT_CWD:Q,TERM:K,SHELL:W,"npm_package_bin_release-bump":X,npm_config_metrics_registry:Y,AFFILIATES_PW_DEV:ee,JESSICA_WALCH_COM_DIR:te,PAUL_LINODE_SSH_IP_ADDRESS:ne,TMPDIR:re,npm_config_global_prefix:ie,PAUL_LINODE_SSH_PASSWORD:se,TERM_PROGRAM_VERSION:oe,WATCHPARTY_SERVER_DIR:ae,MANAGE_NBA_THEME_DIR:le,COLOR:ce,npm_config_preid:pe,TERM_SESSION_ID:ge,npm_config_noproxy:de,JESSICA_DIR:ue,npm_config_local_prefix:fe,AMO_JWT_ISSUER:me,ZSH:he,npm_new_version:ye,NBA_DIR:be,USER:xe,REALOGY_DIR:$e,PERENNIAL_CMS_PLUGINS_DIR:Oe,COMMAND_MODE:Pe,npm_old_version:Re,npm_config_globalconfig:we,JESSICA_PLUGIN_DIR:Ee,AFFILIATES_THEMES_DIR:ve,KUBECONFIG:Fe,MANAGE_NBA_PLUGIN_MANAGER_DIR:ke,AFFILIATES_WP_DIR:Se,PAUL_LINODE_SSH_USERNAME:Ce,SSH_AUTH_SOCK:Ae,COMPOSE_HTTP_TIMEOUT:De,__CF_USER_TEXT_ENCODING:Be,npm_execpath:Te,MANAGE_NBA_PLUGINS_DIR:Ne,PAUL_ROOT_DIR:_e,PAGER:qe,PAUL_GITHUB_TOKEN:Ue,PAUL_DIR:Ie,LSCOLORS:je,AFFILIATES_IP_DEV:Le,TERMINFO_DIRS:Ve,PATH:ze,MANAGE_NBA_THEMES_DIR:Ze,PAUL_X10_SSH_USERNAME:Ge,npm_package_json:He,npm_config_engine_strict:Me,_:Je,WATCHPARTY_DIR:Qe,npm_config_userconfig:Ke,npm_config_init_module:We,__CFBundleIdentifier:Xe,npm_command:Ye,AFFILIATES_PW_QA:et,PAUL_X10_SSH_PASSWORD:tt,PWD:nt,npm_lifecycle_event:rt,EDITOR:it,npm_package_name:st,LANG:ot,AFFILIATES_PLUGINS_DIR:at,ITERM_PROFILE:lt,DOCKER_CLIENT_TIMEOUT:ct,WATCHPARTY_CLIENT_DIR:pt,PERENNIAL_CMS_THEMES_DIR:gt,PAUL_GITHUB_USERNAME:dt,XPC_FLAGS:ut,npm_package_engines_node:ft,npm_config_node_gyp:mt,AMO_JWT_SECRET:ht,npm_package_version:yt,XPC_SERVICE_NAME:bt,SHLVL:xt,HOME:$t,COLORFGBG:Ot,PERENNIAL_CMS_DIR:Pt,LC_TERMINAL_VERSION:Rt,npm_config_save_exact:wt,PAUL_X10_SSH_IP_ADDRESS:Et,ITERM_SESSION_ID:vt,npm_config_cache:Ft,LESS:kt,LOGNAME:St,npm_lifecycle_script:Ct,AFFILIATES_IP_QA:At,N_PRESERVE_NPM:Dt,npm_config_user_agent:Bt,AFFILIATES_DIR:Tt,JESSICA_FRONT_END_DIR:Nt,MANAGE_NBA_DIR:_t,LC_TERMINAL:qt,PERENNIAL_WWW_DIR:Ut,npm_config_init_author_name:It,npm_node_execpath:jt,npm_config_prefix:Lt,COLORTERM:Vt,RELEASE_BUMP_VERSION:zt};var A=require("fs"),x=require("fs/promises"),D=require("path");function B(t,n){return t.filter(r=>!n.some(s=>r.includes(s)))}function T(t){if(typeof t=="string"){if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_+.~#?&/=]*)/.test(t))return t;if(/^[-a-zA-Z0-9()!@:%_+~#?&=]+\/[-a-zA-Z0-9()!@:%_+~#?&=]+$/.test(t))return`https://github.com/${t}`}else return typeof(t==null?void 0:t.url)>"u"?"":T(t.url.replace(/(^git\+|\.git$)/,""));return""}async function N(t,n){var y,g;let{date:r,isChangelog:s,prefix:i,quiet:a,release:l,repository:o}=n;if(!/^\d+\.\d+\.\d+$/.test(l))return t;let c=(g=(y=/\d+\.\d+\.\d+/.exec(l))==null?void 0:y[0])!=null?g:l;if(s===!1)return t.replace(/@([Ss]ince|[Vv]ersion)(:?\s+)unreleased/g,`@$1$2${c}`);let m=o.includes("bitbucket.org")?"bitbucket":"github",h=`${o}/${m==="bitbucket"?"commits":"releases"}/tag/${i?"v":""}${c}`,p=`## [${i?"v":""}${c}]`+(o!==""?`(${h})`:"")+(r?` - ${r}`:"");if(t.includes(p))return a!==!0&&console.info("changelog is already formatted"),t;let v=`(${o}/${m==="bitbucket"?"branches/":""}compare/HEAD..${i?"v":""}${c})`,O=`## [Unreleased]${o?v:""}

### `+["Added","Changed","Deprecated","Removed","Fixed","Security"].join(`

### `);return t.replace(/## \[Unreleased\](\(.*\))?/,p).replace(/### (Added|Changed|Deprecated|Removed|Fixed|Security)\n\n/g,"").replace(/### (Added|Changed|Deprecated|Removed|Fixed|Security)\n$/g,"").replace(/\n\n$/g,`
`).replace(p,O+`

`+p)}async function E(t){let{directoriesToIgnore:n,failOnError:r,filesPath:s,paths:i}=t;if(n.some(o=>s.includes(o)))return i!=null?i:[];let a=[];try{a=await(0,x.readdir)(s)}catch(o){if(o.code!=="ENOENT"){if(r)throw process.exitCode=1,o;console.warn(`could not read files in ${s}`)}a=[]}let l=await Promise.all(a.map(async o=>(await(0,x.stat)(`${s}/${o}`)).isDirectory()===!0?await E({directoriesToIgnore:n,failOnError:r,filesPath:`${s}/${o}`,paths:i}):(0,D.join)(`${s}/${o}`)));return[...new Set([...i,...l].flat(100))]}function _(t){var a;let n={repository:"",version:"0.0.0"};try{n=JSON.parse((0,A.readFileSync)("package.json","utf8"))}catch(l){f.NODE_ENV!=="test"&&t.quiet!==!0&&console.warn("could not read package.json")}let r=[".git",".github","coverage","dist","node_modules","tests/fixtures"],s={changelogPath:"CHANGELOG.md",date:(a=new Date().toISOString().split("T"))==null?void 0:a[0],dryRun:!1,failOnError:!1,filesPath:".",ignore:r,prefix:!1,quiet:f.NODE_ENV==="test"||!1,release:n.version,repository:T(n.repository)};return w(w({},s),t)}var $=require("fs/promises");async function Zt(t){let{changelogPath:n,date:r,dryRun:s,failOnError:i,filesPath:a,ignore:l,prefix:o,quiet:d,release:c,repository:m}=_(t),h=f.NODE_ENV==="test"||s===!0,p=l,O=await E({directoriesToIgnore:p,failOnError:i,filesPath:a,paths:[n]}),y=B(O,p),g=[];return await Promise.all(y.map(async u=>{let P="";try{P=await(0,$.readFile)(u,"utf8")}catch(R){if(i)throw process.exitCode=1,R;d!==!0&&console.warn(`could not read ${u}`)}let F=await N(P,{date:r,isChangelog:n===u,prefix:o,quiet:d,release:c,repository:m});if(P!==F&&(g.push(u),h!==!0))try{await(0,$.writeFile)(u,F,"utf8")}catch(R){if(i)throw process.exitCode=1,R;d!==!0&&console.warn(`could not write ${u}`)}})),g.length>0&&d!==!0&&console.info((h?"would have ":"")+`bumped ${g.join(", ")}`),s?[]:g}0&&(module.exports={releaseBump});
