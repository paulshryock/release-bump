#!/bin/sh

# Maybe install npm dependencies.
if [ ! -d "$(dirname $(dirname $(dirname "$0")))/node_modules" ] || $(git diff --name-only HEAD@{1} HEAD | grep "^package-lock.json" > /dev/null 2>&1); then
	if [ ! -d "$(dirname $(dirname $(dirname "$0")))/node_modules" ]; then
		echo "ğŸ“¦ installing npm dependencies."
	elif $(git diff --name-only HEAD@{1} HEAD | grep "^package-lock.json" > /dev/null 2>&1); then
		echo "ğŸ“¦ updating npm dependencies."
	fi
	npm ci
fi
